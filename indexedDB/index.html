<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="manifest" href="../manifest.json"/>
	<link rel="icon" href="../cat.svg"/>
	<title>IndexedDB API</title>

	<style>
		fieldset {
			max-width: 500px;
			margin-inline: auto;
		}

		legend:has(:nth-child(2)) {
			display: inline-flex;
			width: 100%;
			justify-content: space-between;
			position: relative;
		}

		legend > *:first-child {
			padding: 0;
			margin: 0;
			display: inline-flex;
			width: 100%;
			align-items: center;
		}

		legend > *:first-child::after {
			content: "";
			display: inline-block;
			border-bottom: 2px solid gray;
			flex: 1
		}

		form {
			display: flex;
			flex-direction: column;
			gap: 8px;
		}

		form > label {
			display: inline-flex;
		}

		label > *:first-child {
			min-width: 50px;
		}

		#preview-attach-file, #preview-video {
			display: inline-block;
			width: 100px;
			height: 100px;
			border: 1px dashed;
			border-radius: 4px;
		}

		#content {
			display: flex;
			gap: 4px;
			flex-wrap: wrap;
		}

		#settings {
			background: unset;
			border: none;
			font-size: 30px;
			color: gray;
			border-radius: 50%;
			aspect-ratio: 1;
			padding: 8px;
			line-height: 0;
			cursor: pointer;
		}

		#settings:hover {
			background: rgba(128, 128, 128, 0.1);
		}

		#settings:active {
			background: rgba(128, 128, 128, 0.5);
			color: white;
		}

		#settings-popover {
			position: absolute;
			background: #fff;
			border: 1px solid;
			border-radius: 4px;
			right: 0;
			top: 100%;
			padding: 4px 0;
			display: inline-flex;
			flex-direction: column;
			margin: 0;
			color: gray
		}

		#settings-popover > li::marker {
			content: "";
		}

		#settings-popover > li {
			padding-block: 4px;
			padding-inline: 10px;
			cursor: pointer;
			display: inline-flex;
			gap: 10px;
			justify-content: space-between;
			font-family: Arial, serif;
			font-size: 14px;
		}

		#settings-popover > li:hover {
			background: rgba(128, 128, 128, 0.1);
		}

		#settings-popover > li:active {
			background: rgba(128, 128, 128, 0.5);
			color: #ffffff;
		}

		dialog {
			text-align: center;
		}
	</style>
	<style>
		#warning summary::marker {
			content: ''
		}

		#warning {
			position: fixed;
			top: 0;
			left: 0;
			text-align: center;
			width: 100%;
		}
	</style>
</head>
<body>
<nav>
	<ul>
		<li><a href="../">Home</a></li>
		<li><a href="../ScreenCapture/index.html">ScreenCapture</a></li>
	</ul>
</nav>
<details id="warning">
	<summary></summary>
	<div id="warning-content">
		<template shadowrootmode="open">
			<slot></slot>
			<style>
				::slotted(*) {
					padding: 10px;
					margin: 0;
					position: relative;
					display: block;
				}

				::slotted(*):after, ::slotted(*):before {
					content: '';
					display: block;
					position: absolute;
					width: 100%;
					height: 100%;
					left: 0;
					top: 0;
				}

				::slotted(*):after {
					background: currentColor;
					opacity: 0.3;
				}

				::slotted(*):before {
					background: #fff;
					z-index: -1;
				}

				::slotted(.success) {
					color: green;
				}

				::slotted(.fail) {
					color: red;
				}
			</style>
		</template>
		<p class="success">--</p>
	</div>
</details>

<fieldset>
	<legend>
		<p>Upload File</p>
		<button id="settings">⚙</button>
		<ul id="settings-popover" style="visibility: hidden">
			<li id="clear">Clear <span>×</span></li>
			<li id="reload">Reload <span>↺</span></li>
		</ul>
	</legend>
	<form>
		<label for="attach-file"><span>&nbsp;</span><input type="file" id="attach-file" required/></label>
		<input value="" name="file" hidden id="file"/>
		<label>
			<span></span>
			<div>
				<template shadowrootmode="open">
					<slot name="file"></slot>
				</template>
				<object id="preview-attach-file" slot="file"></object>
				<video id="preview-video"></video>
			</div>

		</label>
		<label for="title"><span>Title: </span><input id="title" name="title" required/></label>
		<input type="submit" value="Submit"/>
	</form>
</fieldset>
<fieldset>
	<legend>Search</legend>
	<input id="search" autocomplete="off"/>
</fieldset>
<fieldset id="preview">
	<legend>Preview</legend>
	<template id="preview-template">
		<div class="wrap">
			<slot name="file" class="preview-file">File</slot>
			<slot name="label" class="file-name">Label</slot>
			<div id="popover">
				<button id="open">Open New Tab</button>
				<button id="delete">Delete</button>
				<button id="edit">Edit</button>
				<a href="#" id="download" download>Download</a>
			</div>
		</div>
		<style>
			.wrap {
				width: fit-content;
				position: relative;
				cursor: pointer;
			}

			#popover {
				position: absolute;
				border: 1px solid;
				background: #fff;
				display: flex;
				flex-direction: column;
				min-width: 100px;
				width: max-content;
				border-radius: 2px;
				z-index: 1;
				text-align: center;
			}

			button {
				background: unset;
				margin: 0;
				padding: 10px;
				text-align: center;
				border: none;
				cursor: pointer;
			}

			button:hover {
				background: rgba(211, 211, 211, 0.38);
			}

			button:active {
				background: lightgray;
			}

			.preview-file {
				border: 1px solid;
				min-width: 50px;
				height: fit-content;
				display: flex;
				border-radius: 4px;
				justify-content: center;
				align-items: center;
			}

			::slotted(:not(video)) {
				pointer-events: none;
			}

			::slotted(p) {
				padding: 0;
				margin: 0;
			}

			.file-name {
				font-weight: 700;
				font-size: 14px;
				text-align: center;
			}
		</style>
	</template>
	<div id="content">
		<template shadowrootmode="open">
			<slot name="content">Loading...</slot>
		</template>
	</div>
	<dialog>
		<p id="warning-clear">All Data Clear, Cannot Undo!!</p>
		<button id="warning-confirm">OK</button>
		<button id="warning-cancel">Cancel</button>
	</dialog>
</fieldset>
<script src="idb.js"></script>
</body>
</html>
