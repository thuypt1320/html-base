<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="manifest" href="../manifest.json">
	<link rel="icon" href="../cat.svg">
	<title>Window postMessage() - iframe page</title>
	<style>
		#send {
			display: flex;
			width: 100%;
		}

		textarea {
			flex: 1;
			background: rgba(128, 128, 128, 0.1);
		}

		#receive {
			border: 1px solid;
			min-height: 100px;
		}
	</style>
</head>
<body>
<div id="send">
	<textarea id="message" name="message"></textarea>
</div>
<p id="receive"></p>
<script>
	<!-- Elements -->
	const message = document.getElementById('message');
	const receive = document.getElementById('receive');
	const parent = window.parent;

	message.addEventListener('input', e => {
		parent.postMessage(e.target.value);
	});

	window.addEventListener('message', e => {
		console.log('Parent: ', e.data);
		receive.innerText = 'Parent: ' + e.data;
	});
</script>
</body>
</html>
